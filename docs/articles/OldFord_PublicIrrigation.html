<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WWTP Old Ford: public irrigation scenario • kwb.qmra</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="WWTP Old Ford: public irrigation scenario">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.qmra</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/general.html">General workflow</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical workflow
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">1 Installation</a>
    </li>
    <li>
      <a href="../articles/usage.html">2 Usage</a>
    </li>
    <li>
      <a href="../articles/web_app.html">3 Web-app development</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case study (WWTP Old Ford)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/OldFord_PublicIrrigation.html">1 Public irrigation</a>
    </li>
    <li>
      <a href="../articles/OldFord_PotableReuse.html">2 Potable reuse</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kwb-r/kwb.qmra">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>WWTP Old Ford: public irrigation scenario</h1>
                        <h4 class="author">Michael Rustler</h4>
            
            <h4 class="date">05 Juni, 2018</h4>
      
      
      <div class="hidden name"><code>OldFord_PublicIrrigation.Rmd</code></div>

    </div>

    
    
<p>How to work with the <code>kwb.qmra</code> package in R(Studio) is described in the following chapters</p>
<p>Once the R package is installed it can be loaded with the following command in R(Studio):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(kwb.qmra)</a></code></pre></div>
<div id="download-old-ford-configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#download-old-ford-configuration" class="anchor"></a>1.1 Download ‘Old Ford’ configuration</h2>
<p>The folder with the csv configuration files for the Old Ford use case are<br>
located here and can be downloaded with the following command from <a href="https://doi.org/10.5281/zenodo.159527">ZENODO</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">temp &lt;-<span class="st"> </span><span class="kw">tempdir</span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">url &lt;-<span class="st"> "https://zenodo.org/record/159527/files/QMRA_OldFord.zip"</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">t_path &lt;-<span class="st"> </span><span class="kw">file.path</span>(temp, <span class="kw">basename</span>(url))</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">download.file</span>(url, <span class="dt">dest=</span> t_path, <span class="dt">mode=</span><span class="st">"wb"</span>) </a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">unzip</span>(t_path, <span class="dt">exdir =</span> temp)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">scenarios_dir &lt;-<span class="st"> </span><span class="kw">file.path</span>(temp, <span class="st">"scenarios"</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">"### Available scenarios:</span><span class="ch">\n</span><span class="st">%s"</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">            <span class="kw">paste</span>(<span class="kw">dir</span>(scenarios_dir), <span class="dt">collapse =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)))</a></code></pre></div>
<pre><code>## ### Available scenarios:
## oldFord_prior_irrigationPublic
## oldFord_prior_potableReuse
## oldFord_prior_toiletFlushing</code></pre>
<p>In total there are three different <code>scenarios</code> available. To the select the first one (oldFord_prior_irrigationPublic), you need to run the following command:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">#### DEFINE DIRECTORY ################</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">confDir &lt;-<span class="st"> </span><span class="kw">dir</span>(scenarios_dir,<span class="dt">full.names =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">confDir</a></code></pre></div>
<pre><code>## [1] "C:\\Users\\mrustl.KWB\\AppData\\Local\\Temp\\Rtmp8a13Gu/scenarios/oldFord_prior_irrigationPublic"</code></pre>
</div>
<div id="import-configuration-into-r" class="section level2">
<h2 class="hasAnchor">
<a href="#import-configuration-into-r" class="anchor"></a>1.2 Import configuration into R</h2>
<p>All csv files with the input data for the hypothetical u <code>dummy</code> (as shown above) are imported into R with the following function:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">#### LOAD ############################</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/config_read.html">config_read</a></span>(confDir) </a></code></pre></div>
</div>
<div id="check-input-data" class="section level1">
<h1 class="hasAnchor">
<a href="#check-input-data" class="anchor"></a>2 Check input data</h1>
<p>The QMRA will be performed - in case the user does not modify them in R - based on the imported input data, which are defined in the configuration folder.</p>
<p>In case of the dummy configuration, a Monte carlo simulation (n = 10) for 365 exposure events per year for three pathogens and the following input parameters will be performed:</p>
<table class="table">
<caption>Simulated pathogens for QMRA (defined in: ‘inflow.csv’ with simulated = 1):</caption>
<thead><tr class="header">
<th align="right">PathogenID</th>
<th align="left">PathogenName</th>
<th align="left">PathogenGroup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
</tr>
<tr class="odd">
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Inflow concentrations (defined in: ‘inflow.csv’) for pathogens used for QMRA:</caption>
<thead><tr class="header">
<th align="right">PathogenID</th>
<th align="left">PathogenName</th>
<th align="left">PathogenGroup</th>
<th align="left">type</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="left">ReferenceName</th>
<th align="left">ReferenceLink</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="left">uniform</td>
<td align="right">100</td>
<td align="right">1e+06</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.6</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159</a></td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="left">uniform</td>
<td align="right">50</td>
<td align="right">5e+03</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.6</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159</a></td>
</tr>
<tr class="odd">
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="left">uniform</td>
<td align="right">1</td>
<td align="right">1e+04</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.6</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=159</a></td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Treatment schemes (defined in: ‘treatment_schemes.csv’) used for QMRA:</caption>
<thead><tr class="header">
<th align="right">TreatmentSchemeID</th>
<th align="left">TreatmentSchemeName</th>
<th align="right">TreatmentID</th>
<th align="left">TreatmentName</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">0</td>
<td align="right">21</td>
<td align="left">None</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">1st</td>
<td align="right">16</td>
<td align="left">Primary treatment</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">1st-2nd</td>
<td align="right">16</td>
<td align="left">Primary treatment</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">1st-2nd</td>
<td align="right">17</td>
<td align="left">Secondary treatment</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">16</td>
<td align="left">Primary treatment</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">17</td>
<td align="left">Secondary treatment</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">19</td>
<td align="left">Membrane filtration</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">16</td>
<td align="left">Primary treatment</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">17</td>
<td align="left">Secondary treatment</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">19</td>
<td align="left">Membrane filtration</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">20</td>
<td align="left">Chlorination</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Treatment processes (defined in: ‘treatment_proecesses.csv’) and assumed log-reductions used for QMRA (from <a href="http://http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf#page=18">DEMOWARE, 2015</a>):</caption>
<thead><tr class="header">
<th align="right">TreatmentID</th>
<th align="left">TreatmentName</th>
<th align="left">TreatmentGroup</th>
<th align="left">PathogenGroup</th>
<th align="left">type</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="left">ReferenceName</th>
<th align="left">ReferenceLink</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">16</td>
<td align="left">Primary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Bacteria</td>
<td align="left">uniform</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="left">Primary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Protozoa</td>
<td align="left">uniform</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="left">Primary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Viruses</td>
<td align="left">uniform</td>
<td align="right">0.0</td>
<td align="right">0.1</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">17</td>
<td align="left">Secondary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Bacteria</td>
<td align="left">uniform</td>
<td align="right">1.0</td>
<td align="right">3.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="left">Secondary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Protozoa</td>
<td align="left">uniform</td>
<td align="right">0.5</td>
<td align="right">1.5</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">17</td>
<td align="left">Secondary treatment</td>
<td align="left">Pretreatment</td>
<td align="left">Viruses</td>
<td align="left">uniform</td>
<td align="right">0.5</td>
<td align="right">2.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="left">Membrane filtration</td>
<td align="left">Filtration</td>
<td align="left">Bacteria</td>
<td align="left">uniform</td>
<td align="right">3.5</td>
<td align="right">6.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">19</td>
<td align="left">Membrane filtration</td>
<td align="left">Filtration</td>
<td align="left">Protozoa</td>
<td align="left">uniform</td>
<td align="right">6.0</td>
<td align="right">6.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="left">Membrane filtration</td>
<td align="left">Filtration</td>
<td align="left">Viruses</td>
<td align="left">uniform</td>
<td align="right">2.5</td>
<td align="right">6.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="left">Chlorination</td>
<td align="left">Primary disinfection</td>
<td align="left">Bacteria</td>
<td align="left">uniform</td>
<td align="right">2.0</td>
<td align="right">6.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">20</td>
<td align="left">Chlorination</td>
<td align="left">Primary disinfection</td>
<td align="left">Protozoa</td>
<td align="left">uniform</td>
<td align="right">0.0</td>
<td align="right">1.5</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="left">Chlorination</td>
<td align="left">Primary disinfection</td>
<td align="left">Viruses</td>
<td align="left">uniform</td>
<td align="right">1.0</td>
<td align="right">3.0</td>
<td align="left">DEMEAUWARE Deliverable 3.1 (p.18-19): NRMMC-EPHC-AHMC (2006), WHO 2006)</td>
<td align="left"><a href="http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf">http://demoware.eu/en/results/deliverables/deliverable-d3-1-appropiate-and-user-friendly-methodologies-for-ra_lca_wfp.pdf/@@download/file/Deliverable%20D3.1%20-%20Appropiate%20and%20user%20friendly%20methodologies%20for%20RA_LCA_WFP.pdf</a></td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="left">None</td>
<td align="left">None</td>
<td align="left">Bacteria</td>
<td align="left">value</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">21</td>
<td align="left">None</td>
<td align="left">None</td>
<td align="left">Protozoa</td>
<td align="left">value</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="left">None</td>
<td align="left">None</td>
<td align="left">Viruses</td>
<td align="left">value</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Ingested volume per event (defined in: row 3 ‘volume_perEvent’ in ‘exposure.csv’) (source: own assumption)):</caption>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="right">value</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">volume_perEvent</td>
<td align="left">value</td>
<td align="right">0.001</td>
</tr></tbody>
</table>
<table class="table">
<caption>Dose-response models (defined in: ‘doseresponse.csv’) used for QMRA (from <a href="http://qmrawiki.canr.msu.edu/index.php/Quantitative_Microbial_Risk_Assessment_(QMRA)_Wiki">QMRAwiki</a>):</caption>
<thead><tr class="header">
<th align="right">PathogenID</th>
<th align="left">PathogenName</th>
<th align="left">PathogenGroup</th>
<th align="left">Best fit model*</th>
<th align="right">k</th>
<th align="right">alpha</th>
<th align="right">N50</th>
<th align="left">Host type</th>
<th align="left">Dose units</th>
<th align="left">Route</th>
<th align="left">Response</th>
<th align="left">Reference</th>
<th align="left">Link</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="left">beta-Poisson</td>
<td align="right">NA</td>
<td align="right">0.144</td>
<td align="right">890.00</td>
<td align="left">human</td>
<td align="left">CFU</td>
<td align="left">oral (in milk)</td>
<td align="left">infection</td>
<td align="left">Black et al 1988</td>
<td align="left"><a href="http://qmrawiki.canr.msu.edu/index.php/Campylobacter_jejuni_and_Campylobacter_coli:_Dose_Response_Models" class="uri">http://qmrawiki.canr.msu.edu/index.php/Campylobacter_jejuni_and_Campylobacter_coli:_Dose_Response_Models</a></td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="left">beta-Poisson</td>
<td align="right">NA</td>
<td align="right">0.253</td>
<td align="right">6.17</td>
<td align="left">human</td>
<td align="left">FFU</td>
<td align="left">oral</td>
<td align="left">infection</td>
<td align="left">Ward et al, 1986</td>
<td align="left"><a href="http://qmrawiki.canr.msu.edu/index.php/Rotavirus:_Dose_Response_Models" class="uri">http://qmrawiki.canr.msu.edu/index.php/Rotavirus:_Dose_Response_Models</a></td>
</tr>
<tr class="odd">
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="left">exponential</td>
<td align="right">0.0572</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">human</td>
<td align="left">oocysts</td>
<td align="left">oral</td>
<td align="left">infection</td>
<td align="left">Messner et al. 2001</td>
<td align="left"><a href="http://qmrawiki.canr.msu.edu/index.php/Cryptosporidium_parvum_and_Cryptosporidium_hominis:_Dose_Response_Models" class="uri">http://qmrawiki.canr.msu.edu/index.php/Cryptosporidium_parvum_and_Cryptosporidium_hominis:_Dose_Response_Models</a></td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Health parameters (defined in: ‘health.csv’) for simulated pathogens (from <a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=132">WHO, 2011</a>):</caption>
<thead><tr class="header">
<th align="right">PathogenID</th>
<th align="left">PathogenName</th>
<th align="right">infection_to_illness</th>
<th align="right">dalys_per_case</th>
<th align="left">ReferenceName</th>
<th align="left">ReferenceLink</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="right">0.3</td>
<td align="right">0.0046</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.4</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155</a></td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="right">0.5</td>
<td align="right">0.0140</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.4</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155</a></td>
</tr>
<tr class="odd">
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="right">0.7</td>
<td align="right">0.0015</td>
<td align="left">WHO (2011): Drinking water guideline, Table 7.4</td>
<td align="left"><a href="http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" class="uri">http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155</a></td>
</tr>
</tbody>
</table>
</div>
<div id="run-risk-calculation" class="section level1">
<h1 class="hasAnchor">
<a href="#run-risk-calculation" class="anchor"></a>4 Run risk calculation</h1>
<p>Subsequently the risk calculation can be performed in R(Studio) by executing the following code, which uses the <code>config</code> that was imported and inspected above:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">risk &lt;-<span class="st"> </span>kwb.qmra<span class="op">::</span><span class="kw">simulate_risk</span>(config)</a></code></pre></div>
<pre><code>## ### STEP 0: BASIC CONFIGURATION #############################################
## 
## Simulated 3 pathogen(s): Campylobacter jejuni, Rotavirus, Cryptosporidium parvum
## Number of random distribution repeatings: 1000
## Number of exposure events: 50
## 
## ### STEP 1: INFLOW ##########################################################
## 
## Simulated pathogen: Campylobacter jejuni
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 100.000000, max: 1000000.000000)
## Simulated pathogen: Rotavirus
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 50.000000, max: 5000.000000)
## Simulated pathogen: Cryptosporidium parvum
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 1.000000, max: 10000.000000)
## 
## ### STEP 2: TREATMENT SCHEMES #############################################
## 
## Simulated treatment: Primary treatment for Bacteria
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.000000, max: 0.500000)
## Simulated treatment: Primary treatment for Protozoa
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.000000, max: 1.000000)
## Simulated treatment: Primary treatment for Viruses
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.000000, max: 0.100000)
## Simulated treatment: Secondary treatment for Bacteria
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 1.000000, max: 3.000000)
## Simulated treatment: Secondary treatment for Protozoa
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.500000, max: 1.500000)
## Simulated treatment: Secondary treatment for Viruses
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.500000, max: 2.000000)
## Simulated treatment: Membrane filtration for Bacteria
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 3.500000, max: 6.000000)
## Simulated treatment: Membrane filtration for Protozoa
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 6.000000, max: 6.000000)
## Simulated treatment: Membrane filtration for Viruses
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 2.500000, max: 6.000000)
## Simulated treatment: Chlorination for Bacteria
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 2.000000, max: 6.000000)
## Simulated treatment: Chlorination for Protozoa
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 0.000000, max: 1.500000)
## Simulated treatment: Chlorination for Viruses
## Create 1000 random distribution(s): uniform (with parameters n: 50, min: 1.000000, max: 3.000000)
## Simulated treatment: None for Bacteria
## Replicate 50000 times constant value 0.000000
## Simulated treatment: None for Protozoa
## Replicate 50000 times constant value 0.000000
## Simulated treatment: None for Viruses
## Replicate 50000 times constant value 0.000000</code></pre>
<pre><code>## Joining, by = "TreatmentID"
## Joining, by = "TreatmentID"</code></pre>
<pre><code>## 
## ### STEP 3: Exposure ######################################################
## 
## Simulated exposure: volume per event
## Replicate 50000 times constant value 0.001000</code></pre>
<pre><code>## Joining, by = c("PathogenGroup", "eventID", "repeatID")</code></pre>
<pre><code>## Warning: Paket 'bindrcpp' wurde unter R Version 3.4.4 erstellt</code></pre>
<pre><code>## Joining, by = c("eventID", "repeatID")</code></pre>
<pre><code>## 
## ### STEP 4: DOSE RESPONSE #################################################
## 
## # A tibble: 3 x 13
##   PathogenID PathogenName    PathogenGroup `Best fit model~       k  alpha
##        &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;              &lt;dbl&gt;  &lt;dbl&gt;
## 1          3 Campylobacter ~ Bacteria      beta-Poisson     NA       0.144
## 2         32 Rotavirus       Viruses       beta-Poisson     NA       0.253
## 3         34 Cryptosporidiu~ Protozoa      exponential       0.0572 NA    
## # ... with 7 more variables: N50 &lt;dbl&gt;, `Host type` &lt;chr&gt;, `Dose
## #   units` &lt;chr&gt;, Route &lt;chr&gt;, Response &lt;chr&gt;, Reference &lt;chr&gt;, Link &lt;chr&gt;
## 
## ### STEP 5: Health        #################################################
## 
## # A tibble: 3 x 6
##   PathogenID PathogenName  infection_to_il~ dalys_per_case ReferenceName  
##        &lt;int&gt; &lt;chr&gt;                    &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;          
## 1          3 Campylobacte~              0.3         0.0046 WHO (2011): Dr~
## 2         32 Rotavirus                  0.5         0.014  WHO (2011): Dr~
## 3         34 Cryptosporid~              0.7         0.0015 WHO (2011): Dr~
## # ... with 1 more variable: ReferenceLink &lt;chr&gt;</code></pre>
<pre><code>## Joining, by = c("PathogenID", "PathogenName")</code></pre>
<p>All (input &amp; output) data will be saved in the resulting R object <code>risk</code> which an be easily inspected by the user, e.g.:</p>
<p><strong>Input data</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">str</span>(risk<span class="op">$</span>input)</a></code></pre></div>
<pre><code>## List of 5
##  $ inflow      :List of 2
##   ..$ events:'data.frame':   150000 obs. of  6 variables:
##   .. ..$ repeatID     : int [1:150000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ eventID      : int [1:150000] 1 2 3 4 5 6 7 8 9 10 ...
##   .. ..$ inflow       : num [1:150000] 930972 658790 133159 601524 692630 ...
##   .. ..$ PathogenID   : int [1:150000] 3 3 3 3 3 3 3 3 3 3 ...
##   .. ..$ PathogenName : chr [1:150000] "Campylobacter jejuni" "Campylobacter jejuni" "Campylobacter jejuni" "Campylobacter jejuni" ...
##   .. ..$ PathogenGroup: chr [1:150000] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   ..$ paras :'data.frame':   3 obs. of  8 variables:
##   .. ..$ type         : Factor w/ 1 level "uniform": 1 1 1
##   .. ..$ repeatings   : num [1:3] 1000 1000 1000
##   .. ..$ events       : num [1:3] 50 50 50
##   .. ..$ min          : int [1:3] 100 50 1
##   .. ..$ max          : num [1:3] 1e+06 5e+03 1e+04
##   .. ..$ PathogenID   : int [1:3] 3 32 34
##   .. ..$ PathogenName : chr [1:3] "Campylobacter jejuni" "Rotavirus" "Cryptosporidium parvum"
##   .. ..$ PathogenGroup: chr [1:3] "Bacteria" "Viruses" "Protozoa"
##  $ treatment   :List of 5
##   ..$ events_long        :'data.frame':  1650000 obs. of  8 variables:
##   .. ..$ repeatID           : int [1:1650000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ eventID            : int [1:1650000] 1 1 1 1 2 2 2 2 3 3 ...
##   .. ..$ logreduction       : num [1:1650000] 0.434 0.434 0.434 0.434 0.409 ...
##   .. ..$ TreatmentID        : int [1:1650000] 16 16 16 16 16 16 16 16 16 16 ...
##   .. ..$ PathogenGroup      : chr [1:1650000] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   .. ..$ TreatmentSchemeID  : int [1:1650000] 1 2 3 4 1 2 3 4 1 2 ...
##   .. ..$ TreatmentSchemeName: chr [1:1650000] "1st" "1st-2nd" "1st-2nd-MBR" "1st-2nd-MBR-Cl" ...
##   .. ..$ TreatmentName      : chr [1:1650000] "Primary treatment" "Primary treatment" "Primary treatment" "Primary treatment" ...
##   ..$ events_wide        :'data.frame':  1650000 obs. of  11 variables:
##   .. ..$ repeatID           : int [1:1650000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ eventID            : int [1:1650000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ PathogenGroup      : chr [1:1650000] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   .. ..$ TreatmentSchemeID  : int [1:1650000] 0 1 2 2 3 3 3 4 4 4 ...
##   .. ..$ TreatmentSchemeName: chr [1:1650000] "0" "1st" "1st-2nd" "1st-2nd" ...
##   .. ..$ TreatmentName      : chr [1:1650000] "None" "Primary treatment" "Primary treatment" "Secondary treatment" ...
##   .. ..$ 16                 : num [1:1650000] NA 0.434 0.434 NA NA ...
##   .. ..$ 17                 : num [1:1650000] NA NA NA 2.63 NA ...
##   .. ..$ 19                 : num [1:1650000] NA NA NA NA 5.66 ...
##   .. ..$ 20                 : num [1:1650000] NA NA NA NA NA ...
##   .. ..$ 21                 : num [1:1650000] 0 NA NA NA NA NA NA NA NA NA ...
##   ..$ schemes_events_wide:'data.frame':  1650000 obs. of  7 variables:
##   .. ..$ eventID      : int [1:1650000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ PathogenGroup: chr [1:1650000] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   .. ..$ scheme_0     : num [1:1650000] 0 NA NA NA NA NA NA NA NA NA ...
##   .. ..$ scheme_1     : num [1:1650000] NA 0.434 0.434 NA NA ...
##   .. ..$ scheme_2     : num [1:1650000] NA NA NA NA NA NA NA NA NA NA ...
##   .. ..$ scheme_3     : num [1:1650000] NA NA NA NA NA NA NA NA NA NA ...
##   .. ..$ scheme_4     : num [1:1650000] NA NA NA NA NA NA NA NA NA NA ...
##   ..$ schemes            :Classes 'tbl_df', 'tbl' and 'data.frame':  11 obs. of  4 variables:
##   .. ..$ TreatmentSchemeID  : int [1:11] 0 1 2 2 3 3 3 4 4 4 ...
##   .. ..$ TreatmentSchemeName: chr [1:11] "0" "1st" "1st-2nd" "1st-2nd" ...
##   .. ..$ TreatmentID        : int [1:11] 21 16 16 17 16 17 19 16 17 19 ...
##   .. ..$ TreatmentName      : chr [1:11] "None" "Primary treatment" "Primary treatment" "Secondary treatment" ...
##   .. ..- attr(*, "spec")=List of 2
##   .. .. ..$ cols   :List of 4
##   .. .. .. ..$ TreatmentSchemeID  : list()
##   .. .. .. .. ..- attr(*, "class")= chr [1:2] "collector_integer" "collector"
##   .. .. .. ..$ TreatmentSchemeName: list()
##   .. .. .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
##   .. .. .. ..$ TreatmentID        : list()
##   .. .. .. .. ..- attr(*, "class")= chr [1:2] "collector_integer" "collector"
##   .. .. .. ..$ TreatmentName      : list()
##   .. .. .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
##   .. .. ..$ default: list()
##   .. .. .. ..- attr(*, "class")= chr [1:2] "collector_guess" "collector"
##   .. .. ..- attr(*, "class")= chr "col_spec"
##   ..$ paras              :'data.frame':  15 obs. of  9 variables:
##   .. ..$ type         : Factor w/ 2 levels "uniform","value": 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ repeatings   : num [1:15] 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 ...
##   .. ..$ events       : num [1:15] 50 50 50 50 50 50 50 50 50 50 ...
##   .. ..$ min          : num [1:15] 0 0 0 1 0.5 0.5 3.5 6 2.5 2 ...
##   .. ..$ max          : num [1:15] 0.5 1 0.1 3 1.5 2 6 6 6 6 ...
##   .. ..$ TreatmentID  : int [1:15] 16 16 16 17 17 17 19 19 19 20 ...
##   .. ..$ PathogenGroup: chr [1:15] "Bacteria" "Protozoa" "Viruses" "Bacteria" ...
##   .. ..$ value        : int [1:15] NA NA NA NA NA NA NA NA NA NA ...
##   .. ..$ TreatmentName: chr [1:15] "Primary treatment" "Primary treatment" "Primary treatment" "Secondary treatment" ...
##  $ exposure    :List of 2
##   ..$ number_of_events: num 50
##   ..$ volumes         :List of 2
##   .. ..$ events:'data.frame':    50000 obs. of  3 variables:
##   .. .. ..$ repeatID       : int [1:50000] 1 1 1 1 1 1 1 1 1 1 ...
##   .. .. ..$ eventID        : int [1:50000] 1 2 3 4 5 6 7 8 9 10 ...
##   .. .. ..$ volume_perEvent: num [1:50000] 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 ...
##   .. ..$ paras :'data.frame':    1 obs. of  4 variables:
##   .. .. ..$ type      : Factor w/ 1 level "value": 1
##   .. .. ..$ repeatings: num 1000
##   .. .. ..$ events    : num 50
##   .. .. ..$ value     : num 0.001
##  $ doseresponse:List of 2
##   ..$ response:Classes 'tbl_df', 'tbl' and 'data.frame': 3000 obs. of  9 variables:
##   .. ..$ PathogenID          : int [1:3000] 34 34 34 34 34 34 34 34 34 34 ...
##   .. ..$ PathogenGroup       : Factor w/ 3 levels "Protozoa","Bacteria",..: 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ PathogenName        : Factor w/ 3 levels "Cryptosporidium parvum",..: 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ model               : Factor w/ 2 levels "exponential",..: 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ dose                : num [1:3000] 1 1.02 1.05 1.07 1.1 ...
##   .. ..$ infectionProbability: num [1:3000] 0.0556 0.0569 0.0581 0.0595 0.0608 ...
##   .. ..$ k                   : num [1:3000] 0.0572 0.0572 0.0572 0.0572 0.0572 0.0572 0.0572 0.0572 0.0572 0.0572 ...
##   .. ..$ alpha               : num [1:3000] NA NA NA NA NA NA NA NA NA NA ...
##   .. ..$ N50                 : num [1:3000] NA NA NA NA NA NA NA NA NA NA ...
##   ..$ paras   :Classes 'tbl_df', 'tbl' and 'data.frame': 3 obs. of  13 variables:
##   .. ..$ PathogenID     : int [1:3] 3 32 34
##   .. ..$ PathogenName   : chr [1:3] "Campylobacter jejuni" "Rotavirus" "Cryptosporidium parvum"
##   .. ..$ PathogenGroup  : chr [1:3] "Bacteria" "Viruses" "Protozoa"
##   .. ..$ Best fit model*: chr [1:3] "beta-Poisson" "beta-Poisson" "exponential"
##   .. ..$ k              : num [1:3] NA NA 0.0572
##   .. ..$ alpha          : num [1:3] 0.144 0.253 NA
##   .. ..$ N50            : num [1:3] 890 6.17 NA
##   .. ..$ Host type      : chr [1:3] "human" "human" "human"
##   .. ..$ Dose units     : chr [1:3] "CFU" "FFU" "oocysts"
##   .. ..$ Route          : chr [1:3] "oral (in milk)" "oral" "oral"
##   .. ..$ Response       : chr [1:3] "infection" "infection" "infection"
##   .. ..$ Reference      : chr [1:3] "Black et al 1988" "Ward et al, 1986" "Messner et al. 2001"
##   .. ..$ Link           : chr [1:3] "http://qmrawiki.canr.msu.edu/index.php/Campylobacter_jejuni_and_Campylobacter_coli:_Dose_Response_Models" "http://qmrawiki.canr.msu.edu/index.php/Rotavirus:_Dose_Response_Models" "http://qmrawiki.canr.msu.edu/index.php/Cryptosporidium_parvum_and_Cryptosporidium_hominis:_Dose_Response_Models"
##  $ health      :Classes 'tbl_df', 'tbl' and 'data.frame':    3 obs. of  6 variables:
##   ..$ PathogenID          : int [1:3] 3 32 34
##   ..$ PathogenName        : chr [1:3] "Campylobacter jejuni" "Rotavirus" "Cryptosporidium parvum"
##   ..$ infection_to_illness: num [1:3] 0.3 0.5 0.7
##   ..$ dalys_per_case      : num [1:3] 0.0046 0.014 0.0015
##   ..$ ReferenceName       : chr [1:3] "WHO (2011): Drinking water guideline, Table 7.4" "WHO (2011): Drinking water guideline, Table 7.4" "WHO (2011): Drinking water guideline, Table 7.4"
##   ..$ ReferenceLink       : chr [1:3] "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155"</code></pre>
<p><strong>Output data</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">str</span>(risk<span class="op">$</span>output)</a></code></pre></div>
<pre><code>## List of 2
##  $ events:Classes 'grouped_df', 'tbl_df', 'tbl' and 'data.frame':    750000 obs. of  20 variables:
##   ..$ TreatmentSchemeID      : int [1:750000] 0 1 2 3 4 0 1 2 3 4 ...
##   ..$ TreatmentSchemeName    : chr [1:750000] "0" "1st" "1st-2nd" "1st-2nd-MBR" ...
##   ..$ PathogenGroup          : chr [1:750000] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   ..$ eventID                : int [1:750000] 1 1 1 1 1 2 2 2 2 2 ...
##   ..$ repeatID               : int [1:750000] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ logreduction           : num [1:750000] 0 0.434 3.066 8.727 11.572 ...
##   ..$ inflow                 : num [1:750000] 930972 930972 930972 930972 930972 ...
##   ..$ PathogenID             : int [1:750000] 3 3 3 3 3 3 3 3 3 3 ...
##   ..$ PathogenName           : chr [1:750000] "Campylobacter jejuni" "Campylobacter jejuni" "Campylobacter jejuni" "Campylobacter jejuni" ...
##   ..$ effluent               : num [1:750000] 9.31e+05 3.43e+05 7.99e+02 1.75e-03 2.49e-06 ...
##   ..$ volume_perEvent        : num [1:750000] 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 0.001 ...
##   ..$ exposure_perEvent      : num [1:750000] 9.31e+02 3.43e+02 7.99e-01 1.75e-06 2.49e-09 ...
##   ..$ dose_perEvent          : int [1:750000] 932 365 0 0 0 701 271 1 0 0 ...
##   ..$ infectionProb_per_event: num [1:750000] 0.503 0.432 0 0 0 ...
##   ..$ infection_to_illness   : num [1:750000] 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 ...
##   ..$ dalys_per_case         : num [1:750000] 0.0046 0.0046 0.0046 0.0046 0.0046 0.0046 0.0046 0.0046 0.0046 0.0046 ...
##   ..$ ReferenceName          : chr [1:750000] "WHO (2011): Drinking water guideline, Table 7.4" "WHO (2011): Drinking water guideline, Table 7.4" "WHO (2011): Drinking water guideline, Table 7.4" "WHO (2011): Drinking water guideline, Table 7.4" ...
##   ..$ ReferenceLink          : chr [1:750000] "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" "http://apps.who.int/iris/bitstream/10665/44584/1/9789241548151_eng.pdf#page=155" ...
##   ..$ illnessProb_per_event  : num [1:750000] 0.151 0.13 0 0 0 ...
##   ..$ dalys_per_event        : num [1:750000] 0.000695 0.000597 0 0 0 ...
##   ..- attr(*, "vars")= chr [1:4] "TreatmentSchemeID" "TreatmentSchemeName" "PathogenGroup" "eventID"
##   ..- attr(*, "labels")='data.frame':    750 obs. of  4 variables:
##   .. ..$ TreatmentSchemeID  : int [1:750] 0 0 0 0 0 0 0 0 0 0 ...
##   .. ..$ TreatmentSchemeName: chr [1:750] "0" "0" "0" "0" ...
##   .. ..$ PathogenGroup      : chr [1:750] "Bacteria" "Bacteria" "Bacteria" "Bacteria" ...
##   .. ..$ eventID            : int [1:750] 1 2 3 4 5 6 7 8 9 10 ...
##   .. ..- attr(*, "vars")= chr [1:4] "TreatmentSchemeID" "TreatmentSchemeName" "PathogenGroup" "eventID"
##   .. ..- attr(*, "drop")= logi TRUE
##   ..- attr(*, "indices")=List of 750
##   .. ..$ : int [1:1000] 0 250 500 750 1000 1250 1500 1750 2000 2250 ...
##   .. ..$ : int [1:1000] 5 255 505 755 1005 1255 1505 1755 2005 2255 ...
##   .. ..$ : int [1:1000] 10 260 510 760 1010 1260 1510 1760 2010 2260 ...
##   .. ..$ : int [1:1000] 15 265 515 765 1015 1265 1515 1765 2015 2265 ...
##   .. ..$ : int [1:1000] 20 270 520 770 1020 1270 1520 1770 2020 2270 ...
##   .. ..$ : int [1:1000] 25 275 525 775 1025 1275 1525 1775 2025 2275 ...
##   .. ..$ : int [1:1000] 30 280 530 780 1030 1280 1530 1780 2030 2280 ...
##   .. ..$ : int [1:1000] 35 285 535 785 1035 1285 1535 1785 2035 2285 ...
##   .. ..$ : int [1:1000] 40 290 540 790 1040 1290 1540 1790 2040 2290 ...
##   .. ..$ : int [1:1000] 45 295 545 795 1045 1295 1545 1795 2045 2295 ...
##   .. ..$ : int [1:1000] 50 300 550 800 1050 1300 1550 1800 2050 2300 ...
##   .. ..$ : int [1:1000] 55 305 555 805 1055 1305 1555 1805 2055 2305 ...
##   .. ..$ : int [1:1000] 60 310 560 810 1060 1310 1560 1810 2060 2310 ...
##   .. ..$ : int [1:1000] 65 315 565 815 1065 1315 1565 1815 2065 2315 ...
##   .. ..$ : int [1:1000] 70 320 570 820 1070 1320 1570 1820 2070 2320 ...
##   .. ..$ : int [1:1000] 75 325 575 825 1075 1325 1575 1825 2075 2325 ...
##   .. ..$ : int [1:1000] 80 330 580 830 1080 1330 1580 1830 2080 2330 ...
##   .. ..$ : int [1:1000] 85 335 585 835 1085 1335 1585 1835 2085 2335 ...
##   .. ..$ : int [1:1000] 90 340 590 840 1090 1340 1590 1840 2090 2340 ...
##   .. ..$ : int [1:1000] 95 345 595 845 1095 1345 1595 1845 2095 2345 ...
##   .. ..$ : int [1:1000] 100 350 600 850 1100 1350 1600 1850 2100 2350 ...
##   .. ..$ : int [1:1000] 105 355 605 855 1105 1355 1605 1855 2105 2355 ...
##   .. ..$ : int [1:1000] 110 360 610 860 1110 1360 1610 1860 2110 2360 ...
##   .. ..$ : int [1:1000] 115 365 615 865 1115 1365 1615 1865 2115 2365 ...
##   .. ..$ : int [1:1000] 120 370 620 870 1120 1370 1620 1870 2120 2370 ...
##   .. ..$ : int [1:1000] 125 375 625 875 1125 1375 1625 1875 2125 2375 ...
##   .. ..$ : int [1:1000] 130 380 630 880 1130 1380 1630 1880 2130 2380 ...
##   .. ..$ : int [1:1000] 135 385 635 885 1135 1385 1635 1885 2135 2385 ...
##   .. ..$ : int [1:1000] 140 390 640 890 1140 1390 1640 1890 2140 2390 ...
##   .. ..$ : int [1:1000] 145 395 645 895 1145 1395 1645 1895 2145 2395 ...
##   .. ..$ : int [1:1000] 150 400 650 900 1150 1400 1650 1900 2150 2400 ...
##   .. ..$ : int [1:1000] 155 405 655 905 1155 1405 1655 1905 2155 2405 ...
##   .. ..$ : int [1:1000] 160 410 660 910 1160 1410 1660 1910 2160 2410 ...
##   .. ..$ : int [1:1000] 165 415 665 915 1165 1415 1665 1915 2165 2415 ...
##   .. ..$ : int [1:1000] 170 420 670 920 1170 1420 1670 1920 2170 2420 ...
##   .. ..$ : int [1:1000] 175 425 675 925 1175 1425 1675 1925 2175 2425 ...
##   .. ..$ : int [1:1000] 180 430 680 930 1180 1430 1680 1930 2180 2430 ...
##   .. ..$ : int [1:1000] 185 435 685 935 1185 1435 1685 1935 2185 2435 ...
##   .. ..$ : int [1:1000] 190 440 690 940 1190 1440 1690 1940 2190 2440 ...
##   .. ..$ : int [1:1000] 195 445 695 945 1195 1445 1695 1945 2195 2445 ...
##   .. ..$ : int [1:1000] 200 450 700 950 1200 1450 1700 1950 2200 2450 ...
##   .. ..$ : int [1:1000] 205 455 705 955 1205 1455 1705 1955 2205 2455 ...
##   .. ..$ : int [1:1000] 210 460 710 960 1210 1460 1710 1960 2210 2460 ...
##   .. ..$ : int [1:1000] 215 465 715 965 1215 1465 1715 1965 2215 2465 ...
##   .. ..$ : int [1:1000] 220 470 720 970 1220 1470 1720 1970 2220 2470 ...
##   .. ..$ : int [1:1000] 225 475 725 975 1225 1475 1725 1975 2225 2475 ...
##   .. ..$ : int [1:1000] 230 480 730 980 1230 1480 1730 1980 2230 2480 ...
##   .. ..$ : int [1:1000] 235 485 735 985 1235 1485 1735 1985 2235 2485 ...
##   .. ..$ : int [1:1000] 240 490 740 990 1240 1490 1740 1990 2240 2490 ...
##   .. ..$ : int [1:1000] 245 495 745 995 1245 1495 1745 1995 2245 2495 ...
##   .. ..$ : int [1:1000] 500000 500250 500500 500750 501000 501250 501500 501750 502000 502250 ...
##   .. ..$ : int [1:1000] 500005 500255 500505 500755 501005 501255 501505 501755 502005 502255 ...
##   .. ..$ : int [1:1000] 500010 500260 500510 500760 501010 501260 501510 501760 502010 502260 ...
##   .. ..$ : int [1:1000] 500015 500265 500515 500765 501015 501265 501515 501765 502015 502265 ...
##   .. ..$ : int [1:1000] 500020 500270 500520 500770 501020 501270 501520 501770 502020 502270 ...
##   .. ..$ : int [1:1000] 500025 500275 500525 500775 501025 501275 501525 501775 502025 502275 ...
##   .. ..$ : int [1:1000] 500030 500280 500530 500780 501030 501280 501530 501780 502030 502280 ...
##   .. ..$ : int [1:1000] 500035 500285 500535 500785 501035 501285 501535 501785 502035 502285 ...
##   .. ..$ : int [1:1000] 500040 500290 500540 500790 501040 501290 501540 501790 502040 502290 ...
##   .. ..$ : int [1:1000] 500045 500295 500545 500795 501045 501295 501545 501795 502045 502295 ...
##   .. ..$ : int [1:1000] 500050 500300 500550 500800 501050 501300 501550 501800 502050 502300 ...
##   .. ..$ : int [1:1000] 500055 500305 500555 500805 501055 501305 501555 501805 502055 502305 ...
##   .. ..$ : int [1:1000] 500060 500310 500560 500810 501060 501310 501560 501810 502060 502310 ...
##   .. ..$ : int [1:1000] 500065 500315 500565 500815 501065 501315 501565 501815 502065 502315 ...
##   .. ..$ : int [1:1000] 500070 500320 500570 500820 501070 501320 501570 501820 502070 502320 ...
##   .. ..$ : int [1:1000] 500075 500325 500575 500825 501075 501325 501575 501825 502075 502325 ...
##   .. ..$ : int [1:1000] 500080 500330 500580 500830 501080 501330 501580 501830 502080 502330 ...
##   .. ..$ : int [1:1000] 500085 500335 500585 500835 501085 501335 501585 501835 502085 502335 ...
##   .. ..$ : int [1:1000] 500090 500340 500590 500840 501090 501340 501590 501840 502090 502340 ...
##   .. ..$ : int [1:1000] 500095 500345 500595 500845 501095 501345 501595 501845 502095 502345 ...
##   .. ..$ : int [1:1000] 500100 500350 500600 500850 501100 501350 501600 501850 502100 502350 ...
##   .. ..$ : int [1:1000] 500105 500355 500605 500855 501105 501355 501605 501855 502105 502355 ...
##   .. ..$ : int [1:1000] 500110 500360 500610 500860 501110 501360 501610 501860 502110 502360 ...
##   .. ..$ : int [1:1000] 500115 500365 500615 500865 501115 501365 501615 501865 502115 502365 ...
##   .. ..$ : int [1:1000] 500120 500370 500620 500870 501120 501370 501620 501870 502120 502370 ...
##   .. ..$ : int [1:1000] 500125 500375 500625 500875 501125 501375 501625 501875 502125 502375 ...
##   .. ..$ : int [1:1000] 500130 500380 500630 500880 501130 501380 501630 501880 502130 502380 ...
##   .. ..$ : int [1:1000] 500135 500385 500635 500885 501135 501385 501635 501885 502135 502385 ...
##   .. ..$ : int [1:1000] 500140 500390 500640 500890 501140 501390 501640 501890 502140 502390 ...
##   .. ..$ : int [1:1000] 500145 500395 500645 500895 501145 501395 501645 501895 502145 502395 ...
##   .. ..$ : int [1:1000] 500150 500400 500650 500900 501150 501400 501650 501900 502150 502400 ...
##   .. ..$ : int [1:1000] 500155 500405 500655 500905 501155 501405 501655 501905 502155 502405 ...
##   .. ..$ : int [1:1000] 500160 500410 500660 500910 501160 501410 501660 501910 502160 502410 ...
##   .. ..$ : int [1:1000] 500165 500415 500665 500915 501165 501415 501665 501915 502165 502415 ...
##   .. ..$ : int [1:1000] 500170 500420 500670 500920 501170 501420 501670 501920 502170 502420 ...
##   .. ..$ : int [1:1000] 500175 500425 500675 500925 501175 501425 501675 501925 502175 502425 ...
##   .. ..$ : int [1:1000] 500180 500430 500680 500930 501180 501430 501680 501930 502180 502430 ...
##   .. ..$ : int [1:1000] 500185 500435 500685 500935 501185 501435 501685 501935 502185 502435 ...
##   .. ..$ : int [1:1000] 500190 500440 500690 500940 501190 501440 501690 501940 502190 502440 ...
##   .. ..$ : int [1:1000] 500195 500445 500695 500945 501195 501445 501695 501945 502195 502445 ...
##   .. ..$ : int [1:1000] 500200 500450 500700 500950 501200 501450 501700 501950 502200 502450 ...
##   .. ..$ : int [1:1000] 500205 500455 500705 500955 501205 501455 501705 501955 502205 502455 ...
##   .. ..$ : int [1:1000] 500210 500460 500710 500960 501210 501460 501710 501960 502210 502460 ...
##   .. ..$ : int [1:1000] 500215 500465 500715 500965 501215 501465 501715 501965 502215 502465 ...
##   .. ..$ : int [1:1000] 500220 500470 500720 500970 501220 501470 501720 501970 502220 502470 ...
##   .. ..$ : int [1:1000] 500225 500475 500725 500975 501225 501475 501725 501975 502225 502475 ...
##   .. ..$ : int [1:1000] 500230 500480 500730 500980 501230 501480 501730 501980 502230 502480 ...
##   .. ..$ : int [1:1000] 500235 500485 500735 500985 501235 501485 501735 501985 502235 502485 ...
##   .. ..$ : int [1:1000] 500240 500490 500740 500990 501240 501490 501740 501990 502240 502490 ...
##   .. .. [list output truncated]
##   ..- attr(*, "drop")= logi TRUE
##   ..- attr(*, "group_sizes")= int [1:750] 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 ...
##   ..- attr(*, "biggest_group_size")= int 1000
##  $ total :Classes 'grouped_df', 'tbl_df', 'tbl' and 'data.frame':    15000 obs. of  15 variables:
##   ..$ repeatID           : int [1:15000] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ TreatmentSchemeID  : int [1:15000] 0 0 0 1 1 1 2 2 2 3 ...
##   ..$ TreatmentSchemeName: chr [1:15000] "0" "0" "0" "1st" ...
##   ..$ PathogenID         : int [1:15000] 3 32 34 3 32 34 3 32 34 3 ...
##   ..$ PathogenName       : chr [1:15000] "Campylobacter jejuni" "Rotavirus" "Cryptosporidium parvum" "Campylobacter jejuni" ...
##   ..$ PathogenGroup      : chr [1:15000] "Bacteria" "Viruses" "Protozoa" "Bacteria" ...
##   ..$ events             : int [1:15000] 50 50 50 50 50 50 50 50 50 50 ...
##   ..$ inflow_median      : num [1:15000] 515929 2569 4602 515929 2569 ...
##   ..$ logreduction_median: num [1:15000] 0 0 0 0.2547 0.0493 ...
##   ..$ volume_sum         : num [1:15000] 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 0.05 ...
##   ..$ exposure_sum       : num [1:15000] 26227 120 238 14877 108 ...
##   ..$ dose_sum           : int [1:15000] 26516 123 258 14832 115 83 291 6 10 0 ...
##   ..$ infectionProb_sum  : num [1:15000] 1 1 1 1 1 ...
##   ..$ illnessProb_sum    : num [1:15000] 0.999 1 1 0.998 1 ...
##   ..$ dalys_sum          : num [1:15000] 0.0301 0.1026 0.0125 0.0266 0.1028 ...
##   ..- attr(*, "vars")= chr [1:5] "repeatID" "TreatmentSchemeID" "TreatmentSchemeName" "PathogenID" ...
##   ..- attr(*, "drop")= logi TRUE</code></pre>
<p>Thus the user has access to all results.</p>
</div>
<div id="visualise-results" class="section level1">
<h1 class="hasAnchor">
<a href="#visualise-results" class="anchor"></a>5 Visualise results</h1>
<p>Finally the results of the QMRA can be visualised for each system component as shown below:</p>
<div id="inflow" class="section level2">
<h2 class="hasAnchor">
<a href="#inflow" class="anchor"></a>5.1 Inflow</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_inflow</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-9-1.png" alt="Simulated inflow concentrations" width="1152"><p class="caption">
Simulated inflow concentrations
</p>
</div>
</div>
<div id="treatment" class="section level2">
<h2 class="hasAnchor">
<a href="#treatment" class="anchor"></a>5.2 Treatment</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_reduction</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-10-1.png" alt="Simulated reductions in the treatment plant" width="1152"><p class="caption">
Simulated reductions in the treatment plant
</p>
</div>
</div>
<div id="effluent" class="section level2">
<h2 class="hasAnchor">
<a href="#effluent" class="anchor"></a>5.3 Effluent</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_effluent</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-11-1.png" alt="Simulated effluent concentrations" width="1152"><p class="caption">
Simulated effluent concentrations
</p>
</div>
</div>
<div id="exposure" class="section level2">
<h2 class="hasAnchor">
<a href="#exposure" class="anchor"></a>5.4 Exposure</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_event_dose</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-12-1.png" alt="Simulated dose per event" width="1152"><p class="caption">
Simulated dose per event
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_event_volume</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-13-1.png" alt="Simulated ingested volume per event" width="1152"><p class="caption">
Simulated ingested volume per event
</p>
</div>
</div>
<div id="health-results" class="section level2">
<h2 class="hasAnchor">
<a href="#health-results" class="anchor"></a>5.5 Health results</h2>
<div id="per-event" class="section level3">
<h3 class="hasAnchor">
<a href="#per-event" class="anchor"></a>5.5.1 Per event</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_event_infectionProb</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-14-1.png" alt="Simulated infection probability per event" width="1152"><p class="caption">
Simulated infection probability per event
</p>
</div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_event_illnessProb</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-15-1.png" alt="Simulated illness probability per event" width="1152"><p class="caption">
Simulated illness probability per event
</p>
</div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_event_dalys</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-16-1.png" alt="Simulated DALYs per event" width="1152"><p class="caption">
Simulated DALYs per event
</p>
</div>
</div>
<div id="total" class="section level3">
<h3 class="hasAnchor">
<a href="#total" class="anchor"></a>5.5.2 Total</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_total_infectionProb</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-17-1.png" alt="Simulated total infection probability (for all events)" width="1152"><p class="caption">
Simulated total infection probability (for all events)
</p>
</div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_total_illnessProb</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-18-1.png" alt="Simulated total illness probability (for all events" width="1152"><p class="caption">
Simulated total illness probability (for all events
</p>
</div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">plot_total_dalys</span>(risk)</a></code></pre></div>
<div class="figure">
<img src="OldFord_PublicIrrigation_files/figure-html/unnamed-chunk-19-1.png" alt="Simulated total DALYs (for all events)" width="1152"><p class="caption">
Simulated total DALYs (for all events)
</p>
</div>
<p>In addition tables with summary statistics, e.g. for the <strong>total risk</strong> can be generated easily as shown below:</p>
<table class="table">
<caption>Total risk (for first repeat of random generation)</caption>
<thead><tr class="header">
<th align="right">repeatID</th>
<th align="right">TreatmentSchemeID</th>
<th align="left">TreatmentSchemeName</th>
<th align="right">PathogenID</th>
<th align="left">PathogenName</th>
<th align="left">PathogenGroup</th>
<th align="right">events</th>
<th align="right">inflow_median</th>
<th align="right">logreduction_median</th>
<th align="right">volume_sum</th>
<th align="right">exposure_sum</th>
<th align="right">dose_sum</th>
<th align="right">infectionProb_sum</th>
<th align="right">illnessProb_sum</th>
<th align="right">dalys_sum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0</td>
<td align="left">0</td>
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="right">50</td>
<td align="right">515929.330</td>
<td align="right">0.0000000</td>
<td align="right">0.05</td>
<td align="right">2.622694e+04</td>
<td align="right">26516</td>
<td align="right">1.0000000</td>
<td align="right">0.9991202</td>
<td align="right">0.0301061</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">0</td>
<td align="left">0</td>
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="right">50</td>
<td align="right">2568.744</td>
<td align="right">0.0000000</td>
<td align="right">0.05</td>
<td align="right">1.196306e+02</td>
<td align="right">123</td>
<td align="right">1.0000000</td>
<td align="right">0.9997302</td>
<td align="right">0.1026083</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">0</td>
<td align="left">0</td>
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="right">50</td>
<td align="right">4601.948</td>
<td align="right">0.0000000</td>
<td align="right">0.05</td>
<td align="right">2.383780e+02</td>
<td align="right">258</td>
<td align="right">0.9999996</td>
<td align="right">0.9999298</td>
<td align="right">0.0125002</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1st</td>
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="right">50</td>
<td align="right">515929.330</td>
<td align="right">0.2547373</td>
<td align="right">0.05</td>
<td align="right">1.487671e+04</td>
<td align="right">14832</td>
<td align="right">1.0000000</td>
<td align="right">0.9978814</td>
<td align="right">0.0265516</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1st</td>
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="right">50</td>
<td align="right">2568.744</td>
<td align="right">0.0493129</td>
<td align="right">0.05</td>
<td align="right">1.080021e+02</td>
<td align="right">115</td>
<td align="right">1.0000000</td>
<td align="right">0.9997280</td>
<td align="right">0.1028465</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1st</td>
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="right">50</td>
<td align="right">4601.948</td>
<td align="right">0.5287657</td>
<td align="right">0.05</td>
<td align="right">8.315339e+01</td>
<td align="right">83</td>
<td align="right">0.9913275</td>
<td align="right">0.9594864</td>
<td align="right">0.0044712</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="left">1st-2nd</td>
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="right">50</td>
<td align="right">515929.330</td>
<td align="right">2.3388704</td>
<td align="right">0.05</td>
<td align="right">2.976659e+02</td>
<td align="right">291</td>
<td align="right">0.9554119</td>
<td align="right">0.5876341</td>
<td align="right">0.0039923</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="left">1st-2nd</td>
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="right">50</td>
<td align="right">2568.744</td>
<td align="right">1.3334035</td>
<td align="right">0.05</td>
<td align="right">9.717874e+00</td>
<td align="right">6</td>
<td align="right">0.8103794</td>
<td align="right">0.5327144</td>
<td align="right">0.0098663</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="left">1st-2nd</td>
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="right">50</td>
<td align="right">4601.948</td>
<td align="right">1.4960981</td>
<td align="right">0.05</td>
<td align="right">9.396315e+00</td>
<td align="right">10</td>
<td align="right">0.4356045</td>
<td align="right">0.3262063</td>
<td align="right">0.0005740</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="right">50</td>
<td align="right">515929.330</td>
<td align="right">7.3362377</td>
<td align="right">0.05</td>
<td align="right">4.732200e-03</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="right">50</td>
<td align="right">2568.744</td>
<td align="right">5.7132764</td>
<td align="right">0.05</td>
<td align="right">3.782300e-03</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1st-2nd-MBR</td>
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="right">50</td>
<td align="right">4601.948</td>
<td align="right">7.4960981</td>
<td align="right">0.05</td>
<td align="right">9.400000e-06</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">3</td>
<td align="left">Campylobacter jejuni</td>
<td align="left">Bacteria</td>
<td align="right">50</td>
<td align="right">515929.330</td>
<td align="right">11.1772568</td>
<td align="right">0.05</td>
<td align="right">1.460000e-05</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">32</td>
<td align="left">Rotavirus</td>
<td align="left">Viruses</td>
<td align="right">50</td>
<td align="right">2568.744</td>
<td align="right">7.6992149</td>
<td align="right">0.05</td>
<td align="right">1.270000e-04</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">4</td>
<td align="left">1st-2nd-MBR-Cl</td>
<td align="right">34</td>
<td align="left">Cryptosporidium parvum</td>
<td align="left">Protozoa</td>
<td align="right">50</td>
<td align="right">4601.948</td>
<td align="right">8.2763468</td>
<td align="right">0.05</td>
<td align="right">2.300000e-06</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="export-results" class="section level2">
<h2 class="hasAnchor">
<a href="#export-results" class="anchor"></a>6 Export results</h2>
<p>E.g. Write reports for all configurations in a folder e.g. <code>/scenarios</code> (here: C:.KWB8a13Gu/scenarios):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">kwb.qmra<span class="op">::</span><span class="kw">report_workflow</span>(<span class="dt">confDirs =</span> scenarios_dir)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#download-old-ford-configuration">1.1 Download ‘Old Ford’ configuration</a></li>
      <li><a href="#import-configuration-into-r">1.2 Import configuration into R</a></li>
      <li><a href="#check-input-data">2 Check input data</a></li>
      <li><a href="#run-risk-calculation">4 Run risk calculation</a></li>
      <li>
<a href="#visualise-results">5 Visualise results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#inflow">5.1 Inflow</a></li>
      <li><a href="#treatment">5.2 Treatment</a></li>
      <li><a href="#effluent">5.3 Effluent</a></li>
      <li><a href="#exposure">5.4 Exposure</a></li>
      <li><a href="#health-results">5.5 Health results</a></li>
      <li><a href="#export-results">6 Export results</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Rustler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
